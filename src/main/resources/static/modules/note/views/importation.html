<div class="panel panel-primary">
    <div class=panel-heading>IMPORTATION DES NOTES</div>
    <div class=panel-body>
        <form name=form method=post role=form class=form-horizontal novalidate>
            <div class=form-group><label for=code class="col-sm-2 control-label">Fichier</label>
                <div class=col-sm-6><input type=file name=fichier id=code class="form-control-file form-control-lg" ng-required=true onchange=angular.element(this).scope().uploadFile(this.files)> <span class=error ng-show="form.code.$dirty && form.code.$error.required">Le fichier est obligatoire</span></div>
            </div>
            <div ng-show="headerNames.length !== 0">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Header</th>
                            <th>Header value</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="header in headerNames">
                            <td>{{header.name}} - {{header.index}}:</td>
                            <td>
                                <div class=form-group>
                                    <div class=col-sm-5><select id=hdr name=head class=form-control mg-model=header.index><option disabled value>-- Veuillez choisir une en-tete --</option><option ng-repeat="headerName in headerNames" value=headerName.index ng-selected="header.name === headerName.name">{{headerName.name}}</option></select></div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class=form-group>
                <div class="col-sm-offset-2 col-sm-10"><button type=submit class="btn btn-success btn-s" ng-click="form.$valid && valider()"><span class="glyphicon glyphicon-upload"></span> Charger</button></div>
            </div>
        </form>
        <div class="alert alert-info" ng-show="importResponse !== null">
            <div>Vous avez correctement import√© {{importResponse.nombreImporte}} notes</div>
            <div ng-show="importResponse.erreurs.length !== 0"><span>Les erreurs suivants sont survenues lors de l'importation</span>
                <table class="table table-bordered table-striped">
                    <tr>
                        <th>No</th>
                        <th>No de ligne</th>
                        <th>Erreur</th>
                    </tr>
                    <tr ng-repeat="erreur in importResponse.erreurs">
                        <td>{{$index + 1}}</td>
                        <td>{{erreur.ligne}}</td>
                        <td>{{erreur.raison}}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>